
nav2_controller:
  ros__parameters:
    use_sim_time: true
    odom_topic: odom
    # DWB controller
    min_vel_x: -0.2
    max_vel_x: 0.5
    min_vel_y: 0.0
    max_vel_y: 0.0
    max_vel_theta: 1.0
    min_speed_xy: 0.1
    min_speed_theta: 0.1
    acc_lim_x: 2.5
    acc_lim_y: 0.0
    acc_lim_theta: 3.2
    decel_lim_x: -2.5
    decel_lim_y: 0.0
    decel_lim_theta: -3.2

    plugins:
      - {name: FollowPath, type: nav2_controller::FollowPath}
      - {name: RotateToGoal, type: nav2_controller::RotateToGoal}
      - {name: Spin, type: nav2_controller::Spin}
      - {name: Wait, type: nav2_controller::Wait}
      - {name: BackUp, type: nav2_controller::BackUp}

bt_navigator:
  ros__parameters:
    use_sim_time: true
    global_frame: map
    robot_base_frame: base_link
    odom_topic: odom
    transform_tolerance: 0.1
    controller_server: controller_server
    planner_server: planner_server
    goal_checker_server: goal_checker_server
    progress_checker_server: progress_checker_server
    smoother_server: smoother_server

planner_server:
  ros__parameters:
    use_sim_time: true
    plugins:
      - {name: GridBased, type: nav2_planner::GridBased}
    GridBased:
      plugin: NavFn # or RRTstar_planner, DWB_planner
      # General properties
      tolerance: 0.5
      use_astar: false
      allow_unknown: true
      max_iterations: 1000

# Costmap filters (optional for more advanced setups)
# costmap_filter_info:
#   ros__parameters:
#     set_once: false
#     filter_info_topic: /costmap_filter_info
#     type: 0

# Global costmap and Local costmap will load parameters from their respective YAMLs
# if they are specified directly in the launch file. Here we just include basic settings.

# This file typically merges all specific configurations for Nav2 modules.
# For now, it points to default plugins and basic parameters. More specific
# tuning would happen in separate parameter files or directly here.

controller_server:
  ros__parameters:
    use_sim_time: true
    controller_frequency: 20.0
    min_percentage_clear: 0.3
    progress_checker_plugins:
      - {name: progress_checker, type: nav2_controller::SimpleProgressChecker}
    goal_checker_plugins:
      - {name: goal_checker, type: nav2_controller::SimpleGoalChecker}
    controller_plugins:
      - {name: DWBController, type: dwb_core::DWBLocalPlanner}
    DWBController:
      odom_topic: odom
      cmd_vel_topic: cmd_vel
      # DWB parameters (example, tune for specific robot)
      max_vel_x: 0.5
      min_vel_x: -0.2
      max_vel_theta: 1.0
      min_vel_theta: -1.0
      acc_lim_x: 2.5
      acc_lim_theta: 3.2
      decel_lim_x: -2.5
      decel_lim_theta: -3.2
      # ... many more DWB parameters can be added ...

recovery_server:
  ros__parameters:
    use_sim_time: true
    recovery_plugins:
      - {name: spin_recovery, type: nav2_recoveries::Spin}
      - {name: backup_recovery, type: nav2_recoveries::BackUp}
      - {name: clear_costmap_recovery, type: nav2_recoveries::ClearCostmap}

# Smoother server
smoother_server:
  ros__parameters:
    use_sim_time: true
    smoother_plugins:
      - {name: SimpleSmoother, type: nav2_smoother::SimpleSmoother}
